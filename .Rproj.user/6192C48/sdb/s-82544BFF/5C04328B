{
    "collab_server" : "",
    "contents" : "#04_landscape_variables.R\n#This script was written by J. Atkins 2015, 2016 (jeffatkins@virginia.edu or @atkinsjeff)\n#https://github.com/atkinsjeff\n#\n#This script combines elevation DEM data and distance-from-stream data to calcualte relationships\n#with these landscape variables and\nrequire(plyr)\nrequire(dplyr)\nrequire(magrittr)\n\n#importing data\nelev_classes <- read.csv(file = \"data/elevation_classes.txt\", sep=\",\", skip = 0, colClasses=c(\"NULL\", \"NULL\", NA, NA, NA))\ncolnames(elev_classes) <- c(\"x\", \"y\", \"elev\")\n\n#\ntable(elev_classes$elev)\n     \n\n\nelev_classes$elev <- as.character(elev_classes$elev)\n\nelev_classes$elev[elev_classes$elev == \"1\"] <- \"LOW\"\nelev_classes$elev[elev_classes$elev == \"2\"] <- \"MID\"\nelev_classes$elev[elev_classes$elev == \"3\"] <- \"HIGH\"\nelev_classes$elev[elev_classes$elev == \"0\"] <- NA\n\n#raw elevation data in meters\nelev_raw <- read.csv(file = \"data/elevation_raw.txt\", sep=\",\", skip = 0, colClasses=c(\"NULL\", \"NULL\", NA, NA, NA))\ncolnames(elev_raw) <- c(\"x\", \"y\", \"elev.raw\")\n\n\n############# Weimer Stream Distances\n\nstream_distance <- read.csv(file = \"data/weimer_distance2.txt\", sep =\",\", skip = 0, colClasses=c(\"NULL\", \"NULL\", NA, NA, NA))\ncolnames(stream_distance) <- c(\"x\", \"y\", \"stream_dist\")\n# \n# stream_distance$x <- stream_distance$x - 5.7\n# stream_distance$y <- stream_distance$y - 15\n\n\n######Importing aspect as this is probably important if you look at where the changes are occuring.\n\nweimer_aspect <- read.csv(file = \"data/weimer_aspect.txt\",, sep=\",\", skip = 0, colClasses=c(\"NULL\", \"NULL\", NA, NA, NA))\ncolnames(weimer_aspect) <- c(\"x\", \"y\", \"aspect\") \n\n\n#classifying the aspect by direction for statistics later\n  weimer_aspect$aspect.class[weimer_aspect$aspect ==-1] <- \"FLAT\"\n  weimer_aspect$aspect.class[weimer_aspect$aspect >= 0 & weimer_aspect$aspect  <= 22.5] <- \"North\"\n  weimer_aspect$aspect.class[weimer_aspect$aspect >= 22.51 & weimer_aspect$aspect  <= 67.5] <- \"Northeast\"\n  weimer_aspect$aspect.class[weimer_aspect$aspect >= 67.51 & weimer_aspect$aspect  <= 112.5] <- \"East\"\n  weimer_aspect$aspect.class[weimer_aspect$aspect >= 112.51 & weimer_aspect$aspect  <= 157.5] <- \"Southeast\"\n  weimer_aspect$aspect.class[weimer_aspect$aspect >= 157.51 & weimer_aspect$aspect  <= 202.5] <- \"South\"\n  weimer_aspect$aspect.class[weimer_aspect$aspect >= 202.51 & weimer_aspect$aspect  <= 247.5] <- \"Southwest\"\n  weimer_aspect$aspect.class[weimer_aspect$aspect >= 247.51 & weimer_aspect$aspect  <= 292.5] <- \"West\"\n  weimer_aspect$aspect.class[weimer_aspect$aspect >= 292.51 & weimer_aspect$aspect  <= 337.5] <- \"Northwest\"\n  weimer_aspect$aspect.class[weimer_aspect$aspect >= 337.51 & weimer_aspect$aspect  <= 360] <- \"North\"\n\nweimer_aspect$aspect.class <-as.factor(weimer_aspect$aspect.class)  \n\n#Making NDVI merge file with classes and stream distance\nclass.ndvi.86.11 <- merge(df.86.11, stream_distance, by = c(\"x\", \"y\"))\nclass.ndvi.86.11 <- merge(class.ndvi.86.11, elev_classes, by = c(\"x\", \"y\"))\nclass.ndvi.86.11 <- merge(class.ndvi.86.11, weimer_aspect, by = c(\"x\", \"y\"))\nclass.ndvi.86.11 <- merge(class.ndvi.86.11, elev_raw, by = c(\"x\", \"y\"))\n\nclass.ndvi.86.11$elev <-as.factor(class.ndvi.86.11$elev)\nclass_ndvi <- class.ndvi.86.11\n\nclass_ndvi$elev.raw[class_ndvi$elev.raw == 0] <- NA\n\n\n#colnames(class_ndvi) <- c(\"x\", \"y\", \"ndvi.86\", \"ndvi.11\", \"diff\", \"stream_dist\", \"elev\", \"aspect\", \"aspect.class\", \"elev.raw\")\n\n\n# #reordering elevation classes \n#class_ndvi$elev <- factor(class.ndvi.86.11$elev, levels = c(\"low\", \"mid\",\"high\"), labels = c(\"LOW\", \"MID\", \"HIGH\"))\n\n",
    "created" : 1520546831925.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "233148807",
    "id" : "5C04328B",
    "lastKnownWriteTime" : 1496430618,
    "last_content_update" : 1496430618,
    "path" : "C:/github/cvi_ndvi_redux/04_landscape_variables.R",
    "project_path" : "04_landscape_variables.R",
    "properties" : {
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}